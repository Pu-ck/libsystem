<form name="form" (submit)="getBooks()" #searchForm="ngForm">
    <div>
        <label for="title">Title</label>
        <input type="text" name="title" [(ngModel)]="title">

        <label for="author">Author</label>
        <input type="text" name="author" [(ngModel)]="author">

        <label for="publisher">Publisher</label>
        <input type="text" name="publisher" [(ngModel)]="publisher">

        <label for="yearOfPrint">Year of print</label>
        <input type="text" name="yearOfPrint" [(ngModel)]="yearOfPrint">

        <label for="genres">Genres</label>
        <form name="genres">
        <ng-container *ngFor="let selectedGenre of selectedGenres">
            <input type="checkbox" name="myCheckbox" [(ngModel)]="selectedGenre.value">{{ selectedGenre.label }}
        </ng-container>
        </form>
        
        <label for="affiliates">Affiliates</label>
        <form name="affiliates">
        <ng-container *ngFor="let selectedAffiliate of selectedAffiliates">
            <input type="checkbox" name="myCheckbox" [(ngModel)]="selectedAffiliate.value">{{ selectedAffiliate.label }}
        </ng-container>
        </form>

        <label for="sortBy">Sort by</label>
        <select name="sortBy" [(ngModel)]="sortType">
            <option value=""></option>
            <option value="title">Title</option>
            <option value="author">Author</option>
            <option value="genre">Genre</option>
            <option value="publisher">Publisher</option>
            <option value="year">Year of print</option>
            <option value="currentQuantity">Current quantity</option>
            <option value="generalQuantity">General quantity</option>
        </select>

        <label for="sortDirection">Sort direction</label>
        <select name="sortDirection" [(ngModel)]="sortDirection">
            <option value=""></option>
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
        </select>

        <button type="submit">Search</button>
    </div>
</form>

<table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Authors</th>
        <th>Genres</th>
        <th>Affiliates and quantity</th>
        <th>Publisher</th>
        <th>Year of print</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let book of books">
        <td>
            {{book.title}}
        </td>
        <td>
            <ul>
                <li *ngFor="let author of book.authors">
                    {{author.name}}
                </li>
            </ul>
        </td>
        <td>
            <ul>
                <li *ngFor="let genre of book.genres">
                    {{genre.name}}
                </li>
            </ul>
        </td>
        <td>
            <ul>
                <li *ngFor="let affiliate of book.affiliates">
                    {{ affiliate.name }} {{ commonBookMethodsService.getAffiliateBookQuantity(book, affiliate.id) }}
                </li>
            </ul>
        </td>
        <td>
            {{book.publisherEntity.name}}
        </td>
        <td>
            {{book.yearOfPrintEntity.yearOfPrint}}
        </td>
        <td>
            <button (click)="redirectToBookDetails(book.id)">Details</button>
        </td>
      </tr>
    </tbody>
</table>

<p *ngIf="noResultsFound">No results found</p>
